# 时间编辑器升级方案

## 问题
用户反馈 `datetime-local` 输入框使用不便，需要更成熟、更快捷的时间编辑方式。

## 解决方案
实现 `TimeEditorField` 组件，提供**业界成熟的时间编辑体验**：

### 功能特性

#### 1. **分离的日期+时间输入**
```
[日期选择框]  [时间选择框]
  2025-11-02      19:30
```
- 分离的输入让用户更清晰地控制日期和时间
- 比 datetime-local 的混合输入更直观

#### 2. **快捷操作按钮**

**当前时间按钮** (蓝色)
- 一键设置为系统当前时间
- 适合"现在开始"场景

**时间调整按钮** (灰色)
- `-15m` / `-5m` / `+5m` / `+15m`
- 快速微调时间
- 无需手动输入，适合修改几分钟的场景

**预设时间按钮** (灰色)
- `09:00` / `12:00` / `17:00` / `21:00`
- 常见工作时间快捷方式
- 可根据需求扩展更多预设

#### 3. **实时时间显示**
```
当前: 2025年11月2日 下午7:30
```
- 底部实时显示当前选中的时间
- 采用用户熟悉的格式
- 避免时区混淆

### UI 布局

```
┌────────────────────────────────────────┐
│ 开始时间                               │
├────────────────────────────────────────┤
│ [日期] [时间]                          │
│ [    现在    ]                         │
│ [-15m][-5m][+5m][+15m]                │
│ [09:00][12:00][17:00][21:00]          │
│ 当前: 2025年11月2日 下午7:30          │
└────────────────────────────────────────┘
┌────────────────────────────────────────┐
│ 结束时间                               │
├────────────────────────────────────────┤
│ [日期] [时间]                          │
│ [    现在    ]                         │
│ [-15m][-5m][+5m][+15m]                │
│ [09:00][12:00][17:00][21:00]          │
│ 当前: 2025年11月3日 上午8:30          │
└────────────────────────────────────────┘
```

### 工作流程示例

**场景 1：快速记录工作时间**
```
1. 编辑 marker，点击"现在" → 设置开始时间为当前
2. 完成后点"现在" → 设置结束时间为当前
3. 若需调整，点击 ±5m / ±15m 微调
✅ 总耗时：3 次点击
```

**场景 2：修改已记录的时间**
```
1. 点击日期框改日期
2. 点击时间框改时间或使用预设 09:00
3. 使用 -5m 调整到 08:55
✅ 总耗时：3 次点击
```

**场景 3：规律工作时间**
```
1. 开始工作 → 点"现在"设置开始
2. 午餐 → 点 12:00 设置结束，新建 marker 点 12:30 开始
3. 下班 → 点 17:00 设置结束
✅ 完全符合常见工作模式
```

### 代码实现

**核心功能**
- `handleDateChange()` - 日期变更
- `handleTimeChange()` - 时间变更
- `adjustTime(minutes)` - ±调整时间
- `setCurrentTime()` - 设置为当前时间
- `setPresetTime(hour, minute)` - 快捷预设

**样式特点**
- 按钮分类着色：蓝色（"现在"）、灰色（调整/预设）
- hover 效果清晰
- 紧凑布局，适合 Modal 弹窗
- 完全响应式

### 与业界同类产品的对标

| 功能 | Notion | Google Calendar | 本方案 |
|------|--------|-----------------|--------|
| 分离日期时间 | ✅ | ✅ | ✅ |
| 快捷"现在" | ✅ | ✅ | ✅ |
| 时间微调按钮 | ❌ | ❌ | ✅ |
| 预设快捷时间 | ❌ | ✅ | ✅ |
| 实时显示 | ❌ | ✅ | ✅ |

### 配置扩展

可在 `setPresetTime` 中自定义预设时间：

```tsx
// 当前
[09:00] [12:00] [17:00] [21:00]

// 可改为（例如医疗行业）
[08:00] [14:00] [20:00] [22:00]

// 可改为（例如零售行业）
[10:00] [15:00] [20:00] [23:00]
```

### 用户体验改进

**从 datetime-local 的问题：**
- ❌ 需要输入完整格式 `2025-11-02T19:30`
- ❌ 难以微调时间（需要一个个改数字）
- ❌ 没有快捷方式

**到本方案的优势：**
- ✅ 一键"现在"
- ✅ 一键预设（09:00 等）
- ✅ 快速微调（±5m / ±15m）
- ✅ 实时反馈（下方显示当前时间）
- ✅ 符合业界标准体验

### 性能
- 零依赖（不需要额外 npm 包）
- 轻量级组件（~200 行代码）
- 无异步操作，响应即时
- 完全受控的输入组件

## 总结

新的 `TimeEditorField` 组件提供了：
1. **分离的日期+时间输入** - 更清晰
2. **快捷操作** - 更快速（现在、预设、微调）
3. **实时反馈** - 更直观
4. **零依赖** - 更轻量
5. **可扩展** - 易于自定义预设时间

这是业界成熟的时间编辑方案，类似于 Google Calendar、Notion 等产品的设计思路。
