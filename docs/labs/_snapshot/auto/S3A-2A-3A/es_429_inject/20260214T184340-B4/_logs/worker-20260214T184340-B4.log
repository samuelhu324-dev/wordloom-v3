D:\Project\wordloom-v3\backend\scripts\legacy\search_outbox_worker.py:52: DeprecationWarning: 'asyncio.WindowsSelectorEventLoopPolicy' is deprecated and slated for removal in Python 3.16
  asyncio.set_event_loop_policy(asyncio.WindowsSelectorEventLoopPolicy())
D:\Project\wordloom-v3\backend\scripts\legacy\search_outbox_worker.py:52: DeprecationWarning: 'asyncio.set_event_loop_policy' is deprecated and slated for removal in Python 3.16
  asyncio.set_event_loop_policy(asyncio.WindowsSelectorEventLoopPolicy())
[OK] Database: postgresql+psycopg://wordloom:wordloom@localhost:5435/wordloom_test
{"ts": "2026-02-14T10:44:56.355525+00:00", "level": "WARNING", "logger": "__main__", "message": "[LABS] ES 429 fault injection enabled: mode=every_n effective_ratio=1.000 ratio=0.000 every_n=1 ops=['upsert'] seed=1", "taskName": "Task-1"}
{"ts": "2026-02-14T10:44:56.967342+00:00", "level": "ERROR", "logger": "__main__", "message": "Failed to process outbox event 4738bc09-883b-4485-b5fd-e100dd4b569a", "taskName": "Task-7", "trace_id": "dc58fcc7c73781c0c4b81abdcf25eb8c", "span_id": "cc885ef7cf9e942b", "exc_info": "Traceback (most recent call last):\n  File \"D:\\Project\\wordloom-v3\\backend\\scripts\\legacy\\search_outbox_worker.py\", line 917, in _process_one\n    _maybe_inject_es_429(\"upsert\")\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^\n  File \"D:\\Project\\wordloom-v3\\backend\\scripts\\legacy\\search_outbox_worker.py\", line 914, in _maybe_inject_es_429\n    raise httpx.HTTPStatusError(\"Injected 429 (fault injection)\", request=req, response=resp)\nhttpx.HTTPStatusError: Injected 429 (fault injection)"}
{"ts": "2026-02-14T10:45:00.055991+00:00", "level": "ERROR", "logger": "__main__", "message": "Failed to process outbox event ec272d7e-2076-4fa9-99ac-bce7e37e19c6", "taskName": "Task-16", "trace_id": "03c9d18aaac13597444bfd9133258062", "span_id": "489e84e9c991067d", "exc_info": "Traceback (most recent call last):\n  File \"D:\\Project\\wordloom-v3\\backend\\scripts\\legacy\\search_outbox_worker.py\", line 917, in _process_one\n    _maybe_inject_es_429(\"upsert\")\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^\n  File \"D:\\Project\\wordloom-v3\\backend\\scripts\\legacy\\search_outbox_worker.py\", line 914, in _maybe_inject_es_429\n    raise httpx.HTTPStatusError(\"Injected 429 (fault injection)\", request=req, response=resp)\nhttpx.HTTPStatusError: Injected 429 (fault injection)"}
{"ts": "2026-02-14T10:45:02.119922+00:00", "level": "ERROR", "logger": "__main__", "message": "Failed to process outbox event ec272d7e-2076-4fa9-99ac-bce7e37e19c6", "taskName": "Task-25", "trace_id": "97313f3f22b402fa5dfe8c3e19f47ae5", "span_id": "803224e2020d78d1", "exc_info": "Traceback (most recent call last):\n  File \"D:\\Project\\wordloom-v3\\backend\\scripts\\legacy\\search_outbox_worker.py\", line 917, in _process_one\n    _maybe_inject_es_429(\"upsert\")\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^\n  File \"D:\\Project\\wordloom-v3\\backend\\scripts\\legacy\\search_outbox_worker.py\", line 914, in _maybe_inject_es_429\n    raise httpx.HTTPStatusError(\"Injected 429 (fault injection)\", request=req, response=resp)\nhttpx.HTTPStatusError: Injected 429 (fault injection)"}
{"ts": "2026-02-14T10:45:05.209731+00:00", "level": "ERROR", "logger": "__main__", "message": "Failed to process outbox event ec272d7e-2076-4fa9-99ac-bce7e37e19c6", "taskName": "Task-34", "trace_id": "988bc0c08b5569027e23c9869c46ab53", "span_id": "15a43ed3d60a4e8f", "exc_info": "Traceback (most recent call last):\n  File \"D:\\Project\\wordloom-v3\\backend\\scripts\\legacy\\search_outbox_worker.py\", line 917, in _process_one\n    _maybe_inject_es_429(\"upsert\")\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^\n  File \"D:\\Project\\wordloom-v3\\backend\\scripts\\legacy\\search_outbox_worker.py\", line 914, in _maybe_inject_es_429\n    raise httpx.HTTPStatusError(\"Injected 429 (fault injection)\", request=req, response=resp)\nhttpx.HTTPStatusError: Injected 429 (fault injection)"}
{"ts": "2026-02-14T10:45:08.303780+00:00", "level": "ERROR", "logger": "__main__", "message": "Failed to process outbox event f76e0c14-a905-4580-8f8d-13297fc5ef8f", "taskName": "Task-45", "trace_id": "ea9919bf1224002a22b852267c289250", "span_id": "9fff5694cc9f526d", "exc_info": "Traceback (most recent call last):\n  File \"D:\\Project\\wordloom-v3\\backend\\scripts\\legacy\\search_outbox_worker.py\", line 917, in _process_one\n    _maybe_inject_es_429(\"upsert\")\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^\n  File \"D:\\Project\\wordloom-v3\\backend\\scripts\\legacy\\search_outbox_worker.py\", line 914, in _maybe_inject_es_429\n    raise httpx.HTTPStatusError(\"Injected 429 (fault injection)\", request=req, response=resp)\nhttpx.HTTPStatusError: Injected 429 (fault injection)"}
{"ts": "2026-02-14T10:45:09.334715+00:00", "level": "ERROR", "logger": "__main__", "message": "Failed to process outbox event ec272d7e-2076-4fa9-99ac-bce7e37e19c6", "taskName": "Task-50", "trace_id": "7c83f6e4d785b6048ec5713944b822f9", "span_id": "f421772cb6be1621", "exc_info": "Traceback (most recent call last):\n  File \"D:\\Project\\wordloom-v3\\backend\\scripts\\legacy\\search_outbox_worker.py\", line 917, in _process_one\n    _maybe_inject_es_429(\"upsert\")\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^\n  File \"D:\\Project\\wordloom-v3\\backend\\scripts\\legacy\\search_outbox_worker.py\", line 914, in _maybe_inject_es_429\n    raise httpx.HTTPStatusError(\"Injected 429 (fault injection)\", request=req, response=resp)\nhttpx.HTTPStatusError: Injected 429 (fault injection)"}
