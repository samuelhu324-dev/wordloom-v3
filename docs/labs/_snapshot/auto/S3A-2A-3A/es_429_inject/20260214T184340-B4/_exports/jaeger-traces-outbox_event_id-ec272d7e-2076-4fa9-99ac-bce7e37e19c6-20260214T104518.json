{
  "data": [
    {
      "traceID": "7c83f6e4d785b6048ec5713944b822f9",
      "spans": [
        {
          "traceID": "7c83f6e4d785b6048ec5713944b822f9",
          "spanID": "9736b0d432ecbabe",
          "operationName": "connect",
          "references": [
            {
              "refType": "CHILD_OF",
              "traceID": "7c83f6e4d785b6048ec5713944b822f9",
              "spanID": "f421772cb6be1621"
            }
          ],
          "startTime": 1771065909332717,
          "duration": 456,
          "tags": [
            {
              "key": "db.name",
              "type": "string",
              "value": "wordloom_test"
            },
            {
              "key": "db.system",
              "type": "string",
              "value": "postgresql"
            },
            {
              "key": "db.user",
              "type": "string",
              "value": "wordloom"
            },
            {
              "key": "net.peer.name",
              "type": "string",
              "value": "localhost"
            },
            {
              "key": "net.peer.port",
              "type": "int64",
              "value": 5435
            },
            {
              "key": "otel.scope.name",
              "type": "string",
              "value": "opentelemetry.instrumentation.sqlalchemy"
            },
            {
              "key": "otel.scope.version",
              "type": "string",
              "value": "0.60b1"
            },
            {
              "key": "span.kind",
              "type": "string",
              "value": "client"
            }
          ],
          "logs": [],
          "processID": "p1",
          "warnings": null
        },
        {
          "traceID": "7c83f6e4d785b6048ec5713944b822f9",
          "spanID": "3705814e7ffd0cdc",
          "operationName": "SELECT wordloom_test",
          "references": [
            {
              "refType": "CHILD_OF",
              "traceID": "7c83f6e4d785b6048ec5713944b822f9",
              "spanID": "f421772cb6be1621"
            }
          ],
          "startTime": 1771065909333319,
          "duration": 1026,
          "tags": [
            {
              "key": "db.name",
              "type": "string",
              "value": "wordloom_test"
            },
            {
              "key": "db.statement",
              "type": "string",
              "value": "SELECT search_outbox_events.id, search_outbox_events.entity_type, search_outbox_events.entity_id, search_outbox_events.op, search_outbox_events.event_version, search_outbox_events.created_at, search_outbox_events.status, search_outbox_events.owner, search_outbox_events.lease_until, search_outbox_events.attempts, search_outbox_events.next_retry_at, search_outbox_events.updated_at, search_outbox_events.processed_at, search_outbox_events.processing_started_at, search_outbox_events.error_reason, search_outbox_events.error, search_outbox_events.traceparent, search_outbox_events.tracestate, search_outbox_events.replay_count, search_outbox_events.last_replayed_at, search_outbox_events.last_replayed_by, search_outbox_events.last_replayed_reason \nFROM search_outbox_events \nWHERE search_outbox_events.id = %(id_1)s::UUID"
            },
            {
              "key": "db.system",
              "type": "string",
              "value": "postgresql"
            },
            {
              "key": "db.user",
              "type": "string",
              "value": "wordloom"
            },
            {
              "key": "net.peer.name",
              "type": "string",
              "value": "localhost"
            },
            {
              "key": "net.peer.port",
              "type": "int64",
              "value": 5435
            },
            {
              "key": "otel.scope.name",
              "type": "string",
              "value": "opentelemetry.instrumentation.sqlalchemy"
            },
            {
              "key": "otel.scope.version",
              "type": "string",
              "value": "0.60b1"
            },
            {
              "key": "span.kind",
              "type": "string",
              "value": "client"
            }
          ],
          "logs": [],
          "processID": "p1",
          "warnings": null
        },
        {
          "traceID": "7c83f6e4d785b6048ec5713944b822f9",
          "spanID": "e687a8c506020a00",
          "operationName": "UPDATE wordloom_test",
          "references": [
            {
              "refType": "CHILD_OF",
              "traceID": "7c83f6e4d785b6048ec5713944b822f9",
              "spanID": "f421772cb6be1621"
            }
          ],
          "startTime": 1771065909336174,
          "duration": 1039,
          "tags": [
            {
              "key": "db.name",
              "type": "string",
              "value": "wordloom_test"
            },
            {
              "key": "db.statement",
              "type": "string",
              "value": "UPDATE search_outbox_events SET status=%(status)s::VARCHAR, owner=%(owner)s::VARCHAR, lease_until=%(lease_until)s::TIMESTAMP WITH TIME ZONE, attempts=%(attempts)s::INTEGER, next_retry_at=%(next_retry_at)s::TIMESTAMP WITH TIME ZONE, updated_at=%(updated_at)s::TIMESTAMP WITH TIME ZONE, processing_started_at=%(processing_started_at)s::TIMESTAMP WITH TIME ZONE, error_reason=%(error_reason)s::VARCHAR, error=%(error)s::VARCHAR WHERE search_outbox_events.id = %(id_1)s::UUID AND search_outbox_events.owner = %(owner_1)s::VARCHAR AND search_outbox_events.status = %(status_1)s::VARCHAR AND search_outbox_events.lease_until > %(lease_until_1)s::TIMESTAMP WITH TIME ZONE"
            },
            {
              "key": "db.system",
              "type": "string",
              "value": "postgresql"
            },
            {
              "key": "db.user",
              "type": "string",
              "value": "wordloom"
            },
            {
              "key": "net.peer.name",
              "type": "string",
              "value": "localhost"
            },
            {
              "key": "net.peer.port",
              "type": "int64",
              "value": 5435
            },
            {
              "key": "otel.scope.name",
              "type": "string",
              "value": "opentelemetry.instrumentation.sqlalchemy"
            },
            {
              "key": "otel.scope.version",
              "type": "string",
              "value": "0.60b1"
            },
            {
              "key": "span.kind",
              "type": "string",
              "value": "client"
            }
          ],
          "logs": [],
          "processID": "p1",
          "warnings": null
        },
        {
          "traceID": "7c83f6e4d785b6048ec5713944b822f9",
          "spanID": "f421772cb6be1621",
          "operationName": "outbox.process",
          "references": [
            {
              "refType": "CHILD_OF",
              "traceID": "7c83f6e4d785b6048ec5713944b822f9",
              "spanID": "2535e58b8b8f25c6"
            }
          ],
          "startTime": 1771065909332555,
          "duration": 6459,
          "tags": [
            {
              "key": "otel.scope.name",
              "type": "string",
              "value": "wordloom.search_outbox_worker"
            },
            {
              "key": "span.kind",
              "type": "string",
              "value": "internal"
            },
            {
              "key": "wordloom.claim_batch_id",
              "type": "string",
              "value": "d2e2fbde-1c42-476e-a82e-8948d10c788c"
            },
            {
              "key": "wordloom.entity_id",
              "type": "string",
              "value": "67afea97-358d-4ed4-b682-ec001feb32c8"
            },
            {
              "key": "wordloom.entity_type",
              "type": "string",
              "value": "book"
            },
            {
              "key": "wordloom.es_index",
              "type": "string",
              "value": "wordloom-test-search-index"
            },
            {
              "key": "wordloom.labs.es_429.counter",
              "type": "int64",
              "value": 6
            },
            {
              "key": "wordloom.labs.es_429.every_n",
              "type": "int64",
              "value": 1
            },
            {
              "key": "wordloom.labs.es_429.injected",
              "type": "bool",
              "value": true
            },
            {
              "key": "wordloom.labs.es_429.mode",
              "type": "string",
              "value": "every_n"
            },
            {
              "key": "wordloom.labs.es_429.op",
              "type": "string",
              "value": "upsert"
            },
            {
              "key": "wordloom.labs.es_429.ops",
              "type": "string",
              "value": "upsert"
            },
            {
              "key": "wordloom.labs.es_429.ratio",
              "type": "float64",
              "value": 0
            },
            {
              "key": "wordloom.labs.es_429.seed",
              "type": "int64",
              "value": 1
            },
            {
              "key": "wordloom.obs_schema",
              "type": "string",
              "value": "labs-009-v2"
            },
            {
              "key": "wordloom.outbox_attempts",
              "type": "int64",
              "value": 3
            },
            {
              "key": "wordloom.outbox_event_id",
              "type": "string",
              "value": "ec272d7e-2076-4fa9-99ac-bce7e37e19c6"
            },
            {
              "key": "wordloom.outbox_event_version",
              "type": "int64",
              "value": 0
            },
            {
              "key": "wordloom.outbox_op",
              "type": "string",
              "value": "upsert"
            },
            {
              "key": "wordloom.projection",
              "type": "string",
              "value": "search_index_to_elastic"
            },
            {
              "key": "wordloom.worker_id",
              "type": "string",
              "value": "DESKTOP-8ITAL7O:30340"
            }
          ],
          "logs": [],
          "processID": "p1",
          "warnings": null
        },
        {
          "traceID": "7c83f6e4d785b6048ec5713944b822f9",
          "spanID": "2535e58b8b8f25c6",
          "operationName": "projection.process_batch",
          "references": [],
          "startTime": 1771065909332501,
          "duration": 6572,
          "tags": [
            {
              "key": "attempt",
              "type": "int64",
              "value": 3
            },
            {
              "key": "batch_size",
              "type": "int64",
              "value": 1
            },
            {
              "key": "entity_type",
              "type": "string",
              "value": "book"
            },
            {
              "key": "failed_count",
              "type": "int64",
              "value": 0
            },
            {
              "key": "ok_count",
              "type": "int64",
              "value": 0
            },
            {
              "key": "op",
              "type": "string",
              "value": "upsert"
            },
            {
              "key": "otel.scope.name",
              "type": "string",
              "value": "wordloom.search_outbox_worker"
            },
            {
              "key": "projection",
              "type": "string",
              "value": "search"
            },
            {
              "key": "reason",
              "type": "string",
              "value": "es_429"
            },
            {
              "key": "result",
              "type": "string",
              "value": "retry"
            },
            {
              "key": "retry_count",
              "type": "int64",
              "value": 1
            },
            {
              "key": "span.kind",
              "type": "string",
              "value": "internal"
            },
            {
              "key": "wordloom.claim_batch_id",
              "type": "string",
              "value": "d2e2fbde-1c42-476e-a82e-8948d10c788c"
            },
            {
              "key": "wordloom.obs_schema",
              "type": "string",
              "value": "labs-009-v2"
            },
            {
              "key": "wordloom.projection",
              "type": "string",
              "value": "search_index_to_elastic"
            },
            {
              "key": "wordloom.worker_id",
              "type": "string",
              "value": "DESKTOP-8ITAL7O:30340"
            }
          ],
          "logs": [],
          "processID": "p1",
          "warnings": null
        }
      ],
      "processes": {
        "p1": {
          "serviceName": "wordloom-search-outbox-worker",
          "tags": [
            {
              "key": "telemetry.sdk.language",
              "type": "string",
              "value": "python"
            },
            {
              "key": "telemetry.sdk.name",
              "type": "string",
              "value": "opentelemetry"
            },
            {
              "key": "telemetry.sdk.version",
              "type": "string",
              "value": "1.39.1"
            }
          ]
        }
      },
      "warnings": null
    },
    {
      "traceID": "988bc0c08b5569027e23c9869c46ab53",
      "spans": [
        {
          "traceID": "988bc0c08b5569027e23c9869c46ab53",
          "spanID": "15a43ed3d60a4e8f",
          "operationName": "outbox.process",
          "references": [
            {
              "refType": "CHILD_OF",
              "traceID": "988bc0c08b5569027e23c9869c46ab53",
              "spanID": "e1cb74d6081a94e2"
            }
          ],
          "startTime": 1771065905206576,
          "duration": 7972,
          "tags": [
            {
              "key": "otel.scope.name",
              "type": "string",
              "value": "wordloom.search_outbox_worker"
            },
            {
              "key": "span.kind",
              "type": "string",
              "value": "internal"
            },
            {
              "key": "wordloom.claim_batch_id",
              "type": "string",
              "value": "b69f3d98-8800-471b-9d5c-96bb8a5bb64a"
            },
            {
              "key": "wordloom.entity_id",
              "type": "string",
              "value": "67afea97-358d-4ed4-b682-ec001feb32c8"
            },
            {
              "key": "wordloom.entity_type",
              "type": "string",
              "value": "book"
            },
            {
              "key": "wordloom.es_index",
              "type": "string",
              "value": "wordloom-test-search-index"
            },
            {
              "key": "wordloom.labs.es_429.counter",
              "type": "int64",
              "value": 4
            },
            {
              "key": "wordloom.labs.es_429.every_n",
              "type": "int64",
              "value": 1
            },
            {
              "key": "wordloom.labs.es_429.injected",
              "type": "bool",
              "value": true
            },
            {
              "key": "wordloom.labs.es_429.mode",
              "type": "string",
              "value": "every_n"
            },
            {
              "key": "wordloom.labs.es_429.op",
              "type": "string",
              "value": "upsert"
            },
            {
              "key": "wordloom.labs.es_429.ops",
              "type": "string",
              "value": "upsert"
            },
            {
              "key": "wordloom.labs.es_429.ratio",
              "type": "float64",
              "value": 0
            },
            {
              "key": "wordloom.labs.es_429.seed",
              "type": "int64",
              "value": 1
            },
            {
              "key": "wordloom.obs_schema",
              "type": "string",
              "value": "labs-009-v2"
            },
            {
              "key": "wordloom.outbox_attempts",
              "type": "int64",
              "value": 2
            },
            {
              "key": "wordloom.outbox_event_id",
              "type": "string",
              "value": "ec272d7e-2076-4fa9-99ac-bce7e37e19c6"
            },
            {
              "key": "wordloom.outbox_event_version",
              "type": "int64",
              "value": 0
            },
            {
              "key": "wordloom.outbox_op",
              "type": "string",
              "value": "upsert"
            },
            {
              "key": "wordloom.projection",
              "type": "string",
              "value": "search_index_to_elastic"
            },
            {
              "key": "wordloom.worker_id",
              "type": "string",
              "value": "DESKTOP-8ITAL7O:30340"
            }
          ],
          "logs": [],
          "processID": "p1",
          "warnings": null
        },
        {
          "traceID": "988bc0c08b5569027e23c9869c46ab53",
          "spanID": "e1cb74d6081a94e2",
          "operationName": "projection.process_batch",
          "references": [],
          "startTime": 1771065905206442,
          "duration": 8174,
          "tags": [
            {
              "key": "attempt",
              "type": "int64",
              "value": 2
            },
            {
              "key": "batch_size",
              "type": "int64",
              "value": 1
            },
            {
              "key": "entity_type",
              "type": "string",
              "value": "book"
            },
            {
              "key": "failed_count",
              "type": "int64",
              "value": 0
            },
            {
              "key": "ok_count",
              "type": "int64",
              "value": 0
            },
            {
              "key": "op",
              "type": "string",
              "value": "upsert"
            },
            {
              "key": "otel.scope.name",
              "type": "string",
              "value": "wordloom.search_outbox_worker"
            },
            {
              "key": "projection",
              "type": "string",
              "value": "search"
            },
            {
              "key": "reason",
              "type": "string",
              "value": "es_429"
            },
            {
              "key": "result",
              "type": "string",
              "value": "retry"
            },
            {
              "key": "retry_count",
              "type": "int64",
              "value": 1
            },
            {
              "key": "span.kind",
              "type": "string",
              "value": "internal"
            },
            {
              "key": "wordloom.claim_batch_id",
              "type": "string",
              "value": "b69f3d98-8800-471b-9d5c-96bb8a5bb64a"
            },
            {
              "key": "wordloom.obs_schema",
              "type": "string",
              "value": "labs-009-v2"
            },
            {
              "key": "wordloom.projection",
              "type": "string",
              "value": "search_index_to_elastic"
            },
            {
              "key": "wordloom.worker_id",
              "type": "string",
              "value": "DESKTOP-8ITAL7O:30340"
            }
          ],
          "logs": [],
          "processID": "p1",
          "warnings": null
        },
        {
          "traceID": "988bc0c08b5569027e23c9869c46ab53",
          "spanID": "c06900920a8cd93e",
          "operationName": "connect",
          "references": [
            {
              "refType": "CHILD_OF",
              "traceID": "988bc0c08b5569027e23c9869c46ab53",
              "spanID": "15a43ed3d60a4e8f"
            }
          ],
          "startTime": 1771065905207032,
          "duration": 841,
          "tags": [
            {
              "key": "db.name",
              "type": "string",
              "value": "wordloom_test"
            },
            {
              "key": "db.system",
              "type": "string",
              "value": "postgresql"
            },
            {
              "key": "db.user",
              "type": "string",
              "value": "wordloom"
            },
            {
              "key": "net.peer.name",
              "type": "string",
              "value": "localhost"
            },
            {
              "key": "net.peer.port",
              "type": "int64",
              "value": 5435
            },
            {
              "key": "otel.scope.name",
              "type": "string",
              "value": "opentelemetry.instrumentation.sqlalchemy"
            },
            {
              "key": "otel.scope.version",
              "type": "string",
              "value": "0.60b1"
            },
            {
              "key": "span.kind",
              "type": "string",
              "value": "client"
            }
          ],
          "logs": [],
          "processID": "p1",
          "warnings": null
        },
        {
          "traceID": "988bc0c08b5569027e23c9869c46ab53",
          "spanID": "70e4358b3c6a3fa8",
          "operationName": "SELECT wordloom_test",
          "references": [
            {
              "refType": "CHILD_OF",
              "traceID": "988bc0c08b5569027e23c9869c46ab53",
              "spanID": "15a43ed3d60a4e8f"
            }
          ],
          "startTime": 1771065905208101,
          "duration": 1223,
          "tags": [
            {
              "key": "db.name",
              "type": "string",
              "value": "wordloom_test"
            },
            {
              "key": "db.statement",
              "type": "string",
              "value": "SELECT search_outbox_events.id, search_outbox_events.entity_type, search_outbox_events.entity_id, search_outbox_events.op, search_outbox_events.event_version, search_outbox_events.created_at, search_outbox_events.status, search_outbox_events.owner, search_outbox_events.lease_until, search_outbox_events.attempts, search_outbox_events.next_retry_at, search_outbox_events.updated_at, search_outbox_events.processed_at, search_outbox_events.processing_started_at, search_outbox_events.error_reason, search_outbox_events.error, search_outbox_events.traceparent, search_outbox_events.tracestate, search_outbox_events.replay_count, search_outbox_events.last_replayed_at, search_outbox_events.last_replayed_by, search_outbox_events.last_replayed_reason \nFROM search_outbox_events \nWHERE search_outbox_events.id = %(id_1)s::UUID"
            },
            {
              "key": "db.system",
              "type": "string",
              "value": "postgresql"
            },
            {
              "key": "db.user",
              "type": "string",
              "value": "wordloom"
            },
            {
              "key": "net.peer.name",
              "type": "string",
              "value": "localhost"
            },
            {
              "key": "net.peer.port",
              "type": "int64",
              "value": 5435
            },
            {
              "key": "otel.scope.name",
              "type": "string",
              "value": "opentelemetry.instrumentation.sqlalchemy"
            },
            {
              "key": "otel.scope.version",
              "type": "string",
              "value": "0.60b1"
            },
            {
              "key": "span.kind",
              "type": "string",
              "value": "client"
            }
          ],
          "logs": [],
          "processID": "p1",
          "warnings": null
        },
        {
          "traceID": "988bc0c08b5569027e23c9869c46ab53",
          "spanID": "6e7724b4b14f9091",
          "operationName": "UPDATE wordloom_test",
          "references": [
            {
              "refType": "CHILD_OF",
              "traceID": "988bc0c08b5569027e23c9869c46ab53",
              "spanID": "15a43ed3d60a4e8f"
            }
          ],
          "startTime": 1771065905210958,
          "duration": 1267,
          "tags": [
            {
              "key": "db.name",
              "type": "string",
              "value": "wordloom_test"
            },
            {
              "key": "db.statement",
              "type": "string",
              "value": "UPDATE search_outbox_events SET status=%(status)s::VARCHAR, owner=%(owner)s::VARCHAR, lease_until=%(lease_until)s::TIMESTAMP WITH TIME ZONE, attempts=%(attempts)s::INTEGER, next_retry_at=%(next_retry_at)s::TIMESTAMP WITH TIME ZONE, updated_at=%(updated_at)s::TIMESTAMP WITH TIME ZONE, processing_started_at=%(processing_started_at)s::TIMESTAMP WITH TIME ZONE, error_reason=%(error_reason)s::VARCHAR, error=%(error)s::VARCHAR WHERE search_outbox_events.id = %(id_1)s::UUID AND search_outbox_events.owner = %(owner_1)s::VARCHAR AND search_outbox_events.status = %(status_1)s::VARCHAR AND search_outbox_events.lease_until > %(lease_until_1)s::TIMESTAMP WITH TIME ZONE"
            },
            {
              "key": "db.system",
              "type": "string",
              "value": "postgresql"
            },
            {
              "key": "db.user",
              "type": "string",
              "value": "wordloom"
            },
            {
              "key": "net.peer.name",
              "type": "string",
              "value": "localhost"
            },
            {
              "key": "net.peer.port",
              "type": "int64",
              "value": 5435
            },
            {
              "key": "otel.scope.name",
              "type": "string",
              "value": "opentelemetry.instrumentation.sqlalchemy"
            },
            {
              "key": "otel.scope.version",
              "type": "string",
              "value": "0.60b1"
            },
            {
              "key": "span.kind",
              "type": "string",
              "value": "client"
            }
          ],
          "logs": [],
          "processID": "p1",
          "warnings": null
        }
      ],
      "processes": {
        "p1": {
          "serviceName": "wordloom-search-outbox-worker",
          "tags": [
            {
              "key": "telemetry.sdk.language",
              "type": "string",
              "value": "python"
            },
            {
              "key": "telemetry.sdk.name",
              "type": "string",
              "value": "opentelemetry"
            },
            {
              "key": "telemetry.sdk.version",
              "type": "string",
              "value": "1.39.1"
            }
          ]
        }
      },
      "warnings": null
    },
    {
      "traceID": "97313f3f22b402fa5dfe8c3e19f47ae5",
      "spans": [
        {
          "traceID": "97313f3f22b402fa5dfe8c3e19f47ae5",
          "spanID": "97f16a5aba21ce89",
          "operationName": "SELECT wordloom_test",
          "references": [
            {
              "refType": "CHILD_OF",
              "traceID": "97313f3f22b402fa5dfe8c3e19f47ae5",
              "spanID": "803224e2020d78d1"
            }
          ],
          "startTime": 1771065902118638,
          "duration": 903,
          "tags": [
            {
              "key": "db.name",
              "type": "string",
              "value": "wordloom_test"
            },
            {
              "key": "db.statement",
              "type": "string",
              "value": "SELECT search_outbox_events.id, search_outbox_events.entity_type, search_outbox_events.entity_id, search_outbox_events.op, search_outbox_events.event_version, search_outbox_events.created_at, search_outbox_events.status, search_outbox_events.owner, search_outbox_events.lease_until, search_outbox_events.attempts, search_outbox_events.next_retry_at, search_outbox_events.updated_at, search_outbox_events.processed_at, search_outbox_events.processing_started_at, search_outbox_events.error_reason, search_outbox_events.error, search_outbox_events.traceparent, search_outbox_events.tracestate, search_outbox_events.replay_count, search_outbox_events.last_replayed_at, search_outbox_events.last_replayed_by, search_outbox_events.last_replayed_reason \nFROM search_outbox_events \nWHERE search_outbox_events.id = %(id_1)s::UUID"
            },
            {
              "key": "db.system",
              "type": "string",
              "value": "postgresql"
            },
            {
              "key": "db.user",
              "type": "string",
              "value": "wordloom"
            },
            {
              "key": "net.peer.name",
              "type": "string",
              "value": "localhost"
            },
            {
              "key": "net.peer.port",
              "type": "int64",
              "value": 5435
            },
            {
              "key": "otel.scope.name",
              "type": "string",
              "value": "opentelemetry.instrumentation.sqlalchemy"
            },
            {
              "key": "otel.scope.version",
              "type": "string",
              "value": "0.60b1"
            },
            {
              "key": "span.kind",
              "type": "string",
              "value": "client"
            }
          ],
          "logs": [],
          "processID": "p1",
          "warnings": null
        },
        {
          "traceID": "97313f3f22b402fa5dfe8c3e19f47ae5",
          "spanID": "6bdbf4daad7f5c72",
          "operationName": "UPDATE wordloom_test",
          "references": [
            {
              "refType": "CHILD_OF",
              "traceID": "97313f3f22b402fa5dfe8c3e19f47ae5",
              "spanID": "803224e2020d78d1"
            }
          ],
          "startTime": 1771065902121119,
          "duration": 1911,
          "tags": [
            {
              "key": "db.name",
              "type": "string",
              "value": "wordloom_test"
            },
            {
              "key": "db.statement",
              "type": "string",
              "value": "UPDATE search_outbox_events SET status=%(status)s::VARCHAR, owner=%(owner)s::VARCHAR, lease_until=%(lease_until)s::TIMESTAMP WITH TIME ZONE, attempts=%(attempts)s::INTEGER, next_retry_at=%(next_retry_at)s::TIMESTAMP WITH TIME ZONE, updated_at=%(updated_at)s::TIMESTAMP WITH TIME ZONE, processing_started_at=%(processing_started_at)s::TIMESTAMP WITH TIME ZONE, error_reason=%(error_reason)s::VARCHAR, error=%(error)s::VARCHAR WHERE search_outbox_events.id = %(id_1)s::UUID AND search_outbox_events.owner = %(owner_1)s::VARCHAR AND search_outbox_events.status = %(status_1)s::VARCHAR AND search_outbox_events.lease_until > %(lease_until_1)s::TIMESTAMP WITH TIME ZONE"
            },
            {
              "key": "db.system",
              "type": "string",
              "value": "postgresql"
            },
            {
              "key": "db.user",
              "type": "string",
              "value": "wordloom"
            },
            {
              "key": "net.peer.name",
              "type": "string",
              "value": "localhost"
            },
            {
              "key": "net.peer.port",
              "type": "int64",
              "value": 5435
            },
            {
              "key": "otel.scope.name",
              "type": "string",
              "value": "opentelemetry.instrumentation.sqlalchemy"
            },
            {
              "key": "otel.scope.version",
              "type": "string",
              "value": "0.60b1"
            },
            {
              "key": "span.kind",
              "type": "string",
              "value": "client"
            }
          ],
          "logs": [],
          "processID": "p1",
          "warnings": null
        },
        {
          "traceID": "97313f3f22b402fa5dfe8c3e19f47ae5",
          "spanID": "803224e2020d78d1",
          "operationName": "outbox.process",
          "references": [
            {
              "refType": "CHILD_OF",
              "traceID": "97313f3f22b402fa5dfe8c3e19f47ae5",
              "spanID": "ae141a2895aa9bef"
            }
          ],
          "startTime": 1771065902117720,
          "duration": 7686,
          "tags": [
            {
              "key": "otel.scope.name",
              "type": "string",
              "value": "wordloom.search_outbox_worker"
            },
            {
              "key": "span.kind",
              "type": "string",
              "value": "internal"
            },
            {
              "key": "wordloom.claim_batch_id",
              "type": "string",
              "value": "67295af3-dfdc-450d-a88f-ae52449644f1"
            },
            {
              "key": "wordloom.entity_id",
              "type": "string",
              "value": "67afea97-358d-4ed4-b682-ec001feb32c8"
            },
            {
              "key": "wordloom.entity_type",
              "type": "string",
              "value": "book"
            },
            {
              "key": "wordloom.es_index",
              "type": "string",
              "value": "wordloom-test-search-index"
            },
            {
              "key": "wordloom.labs.es_429.counter",
              "type": "int64",
              "value": 3
            },
            {
              "key": "wordloom.labs.es_429.every_n",
              "type": "int64",
              "value": 1
            },
            {
              "key": "wordloom.labs.es_429.injected",
              "type": "bool",
              "value": true
            },
            {
              "key": "wordloom.labs.es_429.mode",
              "type": "string",
              "value": "every_n"
            },
            {
              "key": "wordloom.labs.es_429.op",
              "type": "string",
              "value": "upsert"
            },
            {
              "key": "wordloom.labs.es_429.ops",
              "type": "string",
              "value": "upsert"
            },
            {
              "key": "wordloom.labs.es_429.ratio",
              "type": "float64",
              "value": 0
            },
            {
              "key": "wordloom.labs.es_429.seed",
              "type": "int64",
              "value": 1
            },
            {
              "key": "wordloom.obs_schema",
              "type": "string",
              "value": "labs-009-v2"
            },
            {
              "key": "wordloom.outbox_attempts",
              "type": "int64",
              "value": 1
            },
            {
              "key": "wordloom.outbox_event_id",
              "type": "string",
              "value": "ec272d7e-2076-4fa9-99ac-bce7e37e19c6"
            },
            {
              "key": "wordloom.outbox_event_version",
              "type": "int64",
              "value": 0
            },
            {
              "key": "wordloom.outbox_op",
              "type": "string",
              "value": "upsert"
            },
            {
              "key": "wordloom.projection",
              "type": "string",
              "value": "search_index_to_elastic"
            },
            {
              "key": "wordloom.worker_id",
              "type": "string",
              "value": "DESKTOP-8ITAL7O:30340"
            }
          ],
          "logs": [],
          "processID": "p1",
          "warnings": null
        },
        {
          "traceID": "97313f3f22b402fa5dfe8c3e19f47ae5",
          "spanID": "ae141a2895aa9bef",
          "operationName": "projection.process_batch",
          "references": [],
          "startTime": 1771065902117656,
          "duration": 7812,
          "tags": [
            {
              "key": "attempt",
              "type": "int64",
              "value": 1
            },
            {
              "key": "batch_size",
              "type": "int64",
              "value": 1
            },
            {
              "key": "entity_type",
              "type": "string",
              "value": "book"
            },
            {
              "key": "failed_count",
              "type": "int64",
              "value": 0
            },
            {
              "key": "ok_count",
              "type": "int64",
              "value": 0
            },
            {
              "key": "op",
              "type": "string",
              "value": "upsert"
            },
            {
              "key": "otel.scope.name",
              "type": "string",
              "value": "wordloom.search_outbox_worker"
            },
            {
              "key": "projection",
              "type": "string",
              "value": "search"
            },
            {
              "key": "reason",
              "type": "string",
              "value": "es_429"
            },
            {
              "key": "result",
              "type": "string",
              "value": "retry"
            },
            {
              "key": "retry_count",
              "type": "int64",
              "value": 1
            },
            {
              "key": "span.kind",
              "type": "string",
              "value": "internal"
            },
            {
              "key": "wordloom.claim_batch_id",
              "type": "string",
              "value": "67295af3-dfdc-450d-a88f-ae52449644f1"
            },
            {
              "key": "wordloom.obs_schema",
              "type": "string",
              "value": "labs-009-v2"
            },
            {
              "key": "wordloom.projection",
              "type": "string",
              "value": "search_index_to_elastic"
            },
            {
              "key": "wordloom.worker_id",
              "type": "string",
              "value": "DESKTOP-8ITAL7O:30340"
            }
          ],
          "logs": [],
          "processID": "p1",
          "warnings": null
        },
        {
          "traceID": "97313f3f22b402fa5dfe8c3e19f47ae5",
          "spanID": "7c1ddeb74213cba0",
          "operationName": "connect",
          "references": [
            {
              "refType": "CHILD_OF",
              "traceID": "97313f3f22b402fa5dfe8c3e19f47ae5",
              "spanID": "803224e2020d78d1"
            }
          ],
          "startTime": 1771065902117947,
          "duration": 519,
          "tags": [
            {
              "key": "db.name",
              "type": "string",
              "value": "wordloom_test"
            },
            {
              "key": "db.system",
              "type": "string",
              "value": "postgresql"
            },
            {
              "key": "db.user",
              "type": "string",
              "value": "wordloom"
            },
            {
              "key": "net.peer.name",
              "type": "string",
              "value": "localhost"
            },
            {
              "key": "net.peer.port",
              "type": "int64",
              "value": 5435
            },
            {
              "key": "otel.scope.name",
              "type": "string",
              "value": "opentelemetry.instrumentation.sqlalchemy"
            },
            {
              "key": "otel.scope.version",
              "type": "string",
              "value": "0.60b1"
            },
            {
              "key": "span.kind",
              "type": "string",
              "value": "client"
            }
          ],
          "logs": [],
          "processID": "p1",
          "warnings": null
        }
      ],
      "processes": {
        "p1": {
          "serviceName": "wordloom-search-outbox-worker",
          "tags": [
            {
              "key": "telemetry.sdk.language",
              "type": "string",
              "value": "python"
            },
            {
              "key": "telemetry.sdk.name",
              "type": "string",
              "value": "opentelemetry"
            },
            {
              "key": "telemetry.sdk.version",
              "type": "string",
              "value": "1.39.1"
            }
          ]
        }
      },
      "warnings": null
    },
    {
      "traceID": "03c9d18aaac13597444bfd9133258062",
      "spans": [
        {
          "traceID": "03c9d18aaac13597444bfd9133258062",
          "spanID": "e7b8db691318c671",
          "operationName": "connect",
          "references": [
            {
              "refType": "CHILD_OF",
              "traceID": "03c9d18aaac13597444bfd9133258062",
              "spanID": "489e84e9c991067d"
            }
          ],
          "startTime": 1771065900053147,
          "duration": 990,
          "tags": [
            {
              "key": "db.name",
              "type": "string",
              "value": "wordloom_test"
            },
            {
              "key": "db.system",
              "type": "string",
              "value": "postgresql"
            },
            {
              "key": "db.user",
              "type": "string",
              "value": "wordloom"
            },
            {
              "key": "net.peer.name",
              "type": "string",
              "value": "localhost"
            },
            {
              "key": "net.peer.port",
              "type": "int64",
              "value": 5435
            },
            {
              "key": "otel.scope.name",
              "type": "string",
              "value": "opentelemetry.instrumentation.sqlalchemy"
            },
            {
              "key": "otel.scope.version",
              "type": "string",
              "value": "0.60b1"
            },
            {
              "key": "span.kind",
              "type": "string",
              "value": "client"
            }
          ],
          "logs": [],
          "processID": "p1",
          "warnings": null
        },
        {
          "traceID": "03c9d18aaac13597444bfd9133258062",
          "spanID": "1381b1aeefc00d0d",
          "operationName": "SELECT wordloom_test",
          "references": [
            {
              "refType": "CHILD_OF",
              "traceID": "03c9d18aaac13597444bfd9133258062",
              "spanID": "489e84e9c991067d"
            }
          ],
          "startTime": 1771065900054396,
          "duration": 1157,
          "tags": [
            {
              "key": "db.name",
              "type": "string",
              "value": "wordloom_test"
            },
            {
              "key": "db.statement",
              "type": "string",
              "value": "SELECT search_outbox_events.id, search_outbox_events.entity_type, search_outbox_events.entity_id, search_outbox_events.op, search_outbox_events.event_version, search_outbox_events.created_at, search_outbox_events.status, search_outbox_events.owner, search_outbox_events.lease_until, search_outbox_events.attempts, search_outbox_events.next_retry_at, search_outbox_events.updated_at, search_outbox_events.processed_at, search_outbox_events.processing_started_at, search_outbox_events.error_reason, search_outbox_events.error, search_outbox_events.traceparent, search_outbox_events.tracestate, search_outbox_events.replay_count, search_outbox_events.last_replayed_at, search_outbox_events.last_replayed_by, search_outbox_events.last_replayed_reason \nFROM search_outbox_events \nWHERE search_outbox_events.id = %(id_1)s::UUID"
            },
            {
              "key": "db.system",
              "type": "string",
              "value": "postgresql"
            },
            {
              "key": "db.user",
              "type": "string",
              "value": "wordloom"
            },
            {
              "key": "net.peer.name",
              "type": "string",
              "value": "localhost"
            },
            {
              "key": "net.peer.port",
              "type": "int64",
              "value": 5435
            },
            {
              "key": "otel.scope.name",
              "type": "string",
              "value": "opentelemetry.instrumentation.sqlalchemy"
            },
            {
              "key": "otel.scope.version",
              "type": "string",
              "value": "0.60b1"
            },
            {
              "key": "span.kind",
              "type": "string",
              "value": "client"
            }
          ],
          "logs": [],
          "processID": "p1",
          "warnings": null
        },
        {
          "traceID": "03c9d18aaac13597444bfd9133258062",
          "spanID": "568a307022565d34",
          "operationName": "UPDATE wordloom_test",
          "references": [
            {
              "refType": "CHILD_OF",
              "traceID": "03c9d18aaac13597444bfd9133258062",
              "spanID": "489e84e9c991067d"
            }
          ],
          "startTime": 1771065900057334,
          "duration": 2198,
          "tags": [
            {
              "key": "db.name",
              "type": "string",
              "value": "wordloom_test"
            },
            {
              "key": "db.statement",
              "type": "string",
              "value": "UPDATE search_outbox_events SET status=%(status)s::VARCHAR, owner=%(owner)s::VARCHAR, lease_until=%(lease_until)s::TIMESTAMP WITH TIME ZONE, attempts=%(attempts)s::INTEGER, next_retry_at=%(next_retry_at)s::TIMESTAMP WITH TIME ZONE, updated_at=%(updated_at)s::TIMESTAMP WITH TIME ZONE, processing_started_at=%(processing_started_at)s::TIMESTAMP WITH TIME ZONE, error_reason=%(error_reason)s::VARCHAR, error=%(error)s::VARCHAR WHERE search_outbox_events.id = %(id_1)s::UUID AND search_outbox_events.owner = %(owner_1)s::VARCHAR AND search_outbox_events.status = %(status_1)s::VARCHAR AND search_outbox_events.lease_until > %(lease_until_1)s::TIMESTAMP WITH TIME ZONE"
            },
            {
              "key": "db.system",
              "type": "string",
              "value": "postgresql"
            },
            {
              "key": "db.user",
              "type": "string",
              "value": "wordloom"
            },
            {
              "key": "net.peer.name",
              "type": "string",
              "value": "localhost"
            },
            {
              "key": "net.peer.port",
              "type": "int64",
              "value": 5435
            },
            {
              "key": "otel.scope.name",
              "type": "string",
              "value": "opentelemetry.instrumentation.sqlalchemy"
            },
            {
              "key": "otel.scope.version",
              "type": "string",
              "value": "0.60b1"
            },
            {
              "key": "span.kind",
              "type": "string",
              "value": "client"
            }
          ],
          "logs": [],
          "processID": "p1",
          "warnings": null
        },
        {
          "traceID": "03c9d18aaac13597444bfd9133258062",
          "spanID": "489e84e9c991067d",
          "operationName": "outbox.process",
          "references": [
            {
              "refType": "CHILD_OF",
              "traceID": "03c9d18aaac13597444bfd9133258062",
              "spanID": "5c983af27e5c6717"
            }
          ],
          "startTime": 1771065900052806,
          "duration": 9157,
          "tags": [
            {
              "key": "otel.scope.name",
              "type": "string",
              "value": "wordloom.search_outbox_worker"
            },
            {
              "key": "span.kind",
              "type": "string",
              "value": "internal"
            },
            {
              "key": "wordloom.claim_batch_id",
              "type": "string",
              "value": "821bc530-09da-4bd0-b589-c87e17f6e4be"
            },
            {
              "key": "wordloom.entity_id",
              "type": "string",
              "value": "67afea97-358d-4ed4-b682-ec001feb32c8"
            },
            {
              "key": "wordloom.entity_type",
              "type": "string",
              "value": "book"
            },
            {
              "key": "wordloom.es_index",
              "type": "string",
              "value": "wordloom-test-search-index"
            },
            {
              "key": "wordloom.labs.es_429.counter",
              "type": "int64",
              "value": 2
            },
            {
              "key": "wordloom.labs.es_429.every_n",
              "type": "int64",
              "value": 1
            },
            {
              "key": "wordloom.labs.es_429.injected",
              "type": "bool",
              "value": true
            },
            {
              "key": "wordloom.labs.es_429.mode",
              "type": "string",
              "value": "every_n"
            },
            {
              "key": "wordloom.labs.es_429.op",
              "type": "string",
              "value": "upsert"
            },
            {
              "key": "wordloom.labs.es_429.ops",
              "type": "string",
              "value": "upsert"
            },
            {
              "key": "wordloom.labs.es_429.ratio",
              "type": "float64",
              "value": 0
            },
            {
              "key": "wordloom.labs.es_429.seed",
              "type": "int64",
              "value": 1
            },
            {
              "key": "wordloom.obs_schema",
              "type": "string",
              "value": "labs-009-v2"
            },
            {
              "key": "wordloom.outbox_attempts",
              "type": "int64",
              "value": 0
            },
            {
              "key": "wordloom.outbox_event_id",
              "type": "string",
              "value": "ec272d7e-2076-4fa9-99ac-bce7e37e19c6"
            },
            {
              "key": "wordloom.outbox_event_version",
              "type": "int64",
              "value": 0
            },
            {
              "key": "wordloom.outbox_op",
              "type": "string",
              "value": "upsert"
            },
            {
              "key": "wordloom.projection",
              "type": "string",
              "value": "search_index_to_elastic"
            },
            {
              "key": "wordloom.worker_id",
              "type": "string",
              "value": "DESKTOP-8ITAL7O:30340"
            }
          ],
          "logs": [],
          "processID": "p1",
          "warnings": null
        },
        {
          "traceID": "03c9d18aaac13597444bfd9133258062",
          "spanID": "5c983af27e5c6717",
          "operationName": "projection.process_batch",
          "references": [],
          "startTime": 1771065900052710,
          "duration": 9321,
          "tags": [
            {
              "key": "attempt",
              "type": "int64",
              "value": 0
            },
            {
              "key": "batch_size",
              "type": "int64",
              "value": 1
            },
            {
              "key": "entity_type",
              "type": "string",
              "value": "book"
            },
            {
              "key": "failed_count",
              "type": "int64",
              "value": 0
            },
            {
              "key": "ok_count",
              "type": "int64",
              "value": 0
            },
            {
              "key": "op",
              "type": "string",
              "value": "upsert"
            },
            {
              "key": "otel.scope.name",
              "type": "string",
              "value": "wordloom.search_outbox_worker"
            },
            {
              "key": "projection",
              "type": "string",
              "value": "search"
            },
            {
              "key": "reason",
              "type": "string",
              "value": "es_429"
            },
            {
              "key": "result",
              "type": "string",
              "value": "retry"
            },
            {
              "key": "retry_count",
              "type": "int64",
              "value": 1
            },
            {
              "key": "span.kind",
              "type": "string",
              "value": "internal"
            },
            {
              "key": "wordloom.claim_batch_id",
              "type": "string",
              "value": "821bc530-09da-4bd0-b589-c87e17f6e4be"
            },
            {
              "key": "wordloom.obs_schema",
              "type": "string",
              "value": "labs-009-v2"
            },
            {
              "key": "wordloom.projection",
              "type": "string",
              "value": "search_index_to_elastic"
            },
            {
              "key": "wordloom.worker_id",
              "type": "string",
              "value": "DESKTOP-8ITAL7O:30340"
            }
          ],
          "logs": [],
          "processID": "p1",
          "warnings": null
        }
      ],
      "processes": {
        "p1": {
          "serviceName": "wordloom-search-outbox-worker",
          "tags": [
            {
              "key": "telemetry.sdk.language",
              "type": "string",
              "value": "python"
            },
            {
              "key": "telemetry.sdk.name",
              "type": "string",
              "value": "opentelemetry"
            },
            {
              "key": "telemetry.sdk.version",
              "type": "string",
              "value": "1.39.1"
            }
          ]
        }
      },
      "warnings": null
    }
  ],
  "total": 0,
  "limit": 0,
  "offset": 0,
  "errors": null
}